{"version":3,"file":"lifecycle-plugin.common.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["import { NodeEditor } from \"rete\";\r\n\r\nexport function getHook<T extends unknown>(editor: NodeEditor, name: undefined | string, method: keyof T) {\r\n    if (!name) return () => null;\r\n    \r\n    const component = editor.getComponent(name);\r\n    \r\n    if (method in component) {\r\n        const c = component as T;\r\n\r\n        return c[method];\r\n    }\r\n\r\n    return () => null;\r\n}","import { NodeEditor } from 'rete';\r\nimport { OnCreated, OnDestroyed, OnConnect, OnConnected, OnDisconnect, OnDisconnected } from './interfaces';\r\nimport { getHook } from './utils';\r\n\r\nfunction install(editor: NodeEditor) {\r\n    editor.on('nodecreated', node =>\r\n        getHook<OnCreated>(editor, node.name, 'created')(node)\r\n    );\r\n    editor.on('noderemoved', node =>\r\n        getHook<OnDestroyed>(editor, node.name, 'destroyed')(node)\r\n    );\r\n    editor.on('connectioncreate', ({ input, output }) => {\r\n        if (getHook<OnConnect>(editor, input.node?.name, 'onconnect')(input) === false ||\r\n            getHook<OnConnect>(editor, output.node?.name, 'onconnect')(output) === false)\r\n            return false;\r\n    });\r\n    editor.on('connectioncreated', connection => {\r\n        getHook<OnConnected>(editor, connection.input.node?.name, 'connected')(connection);\r\n        getHook<OnConnected>(editor, connection.output.node?.name, 'connected')(connection);\r\n    });\r\n    editor.on('connectionremove', connection => {\r\n        if (getHook<OnDisconnect>(editor, connection.input.node?.name, 'ondisconnect')(connection) === false ||\r\n            getHook<OnDisconnect>(editor, connection.output.node?.name, 'ondisconnect')(connection) === false)\r\n            return false;\r\n    });\r\n    editor.on('connectionremoved', connection => {\r\n        getHook<OnDisconnected>(editor, connection.input.node?.name, 'disconnected')(connection);\r\n        getHook<OnDisconnected>(editor, connection.output.node?.name, 'disconnected')(connection);\r\n    });\r\n}\r\n\r\nexport * from './interfaces';\r\nexport default {\r\n    name: 'lifecycle',\r\n    install\r\n}"],"names":["getHook","editor","name","method","component","getComponent","c","install","on","node","input","output","connection"],"mappings":";;;;;;;;;AAEO,SAASA,OAAT,CAAoCC,MAApC,EAAwDC,IAAxD,EAAkFC,MAAlF,EAAmG;MAClG,CAACD,IAAL,EAAW,OAAO;WAAM,IAAN;GAAP;MAELE,SAAS,GAAGH,MAAM,CAACI,YAAP,CAAoBH,IAApB,CAAlB;;MAEIC,MAAM,IAAIC,SAAd,EAAyB;QACfE,CAAC,GAAGF,SAAV;WAEOE,CAAC,CAACH,MAAD,CAAR;;;SAGG;WAAM,IAAN;GAAP;;;ACTJ,SAASI,OAAT,CAAiBN,MAAjB,EAAqC;EACjCA,MAAM,CAACO,EAAP,CAAU,aAAV,EAAyB,UAAAC,IAAI;WACzBT,OAAO,CAAYC,MAAZ,EAAoBQ,IAAI,CAACP,IAAzB,EAA+B,SAA/B,CAAP,CAAiDO,IAAjD,CADyB;GAA7B;EAGAR,MAAM,CAACO,EAAP,CAAU,aAAV,EAAyB,UAAAC,IAAI;WACzBT,OAAO,CAAcC,MAAd,EAAsBQ,IAAI,CAACP,IAA3B,EAAiC,WAAjC,CAAP,CAAqDO,IAArD,CADyB;GAA7B;EAGAR,MAAM,CAACO,EAAP,CAAU,kBAAV,EAA8B,gBAAuB;;;QAApBE,KAAoB,QAApBA,KAAoB;QAAbC,MAAa,QAAbA,MAAa;QAC7CX,OAAO,CAAYC,MAAZ,iBAAoBS,KAAK,CAACD,IAA1B,gDAAoB,YAAYP,IAAhC,EAAsC,WAAtC,CAAP,CAA0DQ,KAA1D,MAAqE,KAArE,IACAV,OAAO,CAAYC,MAAZ,kBAAoBU,MAAM,CAACF,IAA3B,iDAAoB,aAAaP,IAAjC,EAAuC,WAAvC,CAAP,CAA2DS,MAA3D,MAAuE,KAD3E,EAEI,OAAO,KAAP;GAHR;EAKAV,MAAM,CAACO,EAAP,CAAU,mBAAV,EAA+B,UAAAI,UAAU,EAAI;;;IACzCZ,OAAO,CAAcC,MAAd,2BAAsBW,UAAU,CAACF,KAAX,CAAiBD,IAAvC,0DAAsB,sBAAuBP,IAA7C,EAAmD,WAAnD,CAAP,CAAuEU,UAAvE;IACAZ,OAAO,CAAcC,MAAd,2BAAsBW,UAAU,CAACD,MAAX,CAAkBF,IAAxC,0DAAsB,sBAAwBP,IAA9C,EAAoD,WAApD,CAAP,CAAwEU,UAAxE;GAFJ;EAIAX,MAAM,CAACO,EAAP,CAAU,kBAAV,EAA8B,UAAAI,UAAU,EAAI;;;QACpCZ,OAAO,CAAeC,MAAf,4BAAuBW,UAAU,CAACF,KAAX,CAAiBD,IAAxC,2DAAuB,uBAAuBP,IAA9C,EAAoD,cAApD,CAAP,CAA2EU,UAA3E,MAA2F,KAA3F,IACAZ,OAAO,CAAeC,MAAf,4BAAuBW,UAAU,CAACD,MAAX,CAAkBF,IAAzC,2DAAuB,uBAAwBP,IAA/C,EAAqD,cAArD,CAAP,CAA4EU,UAA5E,MAA4F,KADhG,EAEI,OAAO,KAAP;GAHR;EAKAX,MAAM,CAACO,EAAP,CAAU,mBAAV,EAA+B,UAAAI,UAAU,EAAI;;;IACzCZ,OAAO,CAAiBC,MAAjB,4BAAyBW,UAAU,CAACF,KAAX,CAAiBD,IAA1C,2DAAyB,uBAAuBP,IAAhD,EAAsD,cAAtD,CAAP,CAA6EU,UAA7E;IACAZ,OAAO,CAAiBC,MAAjB,4BAAyBW,UAAU,CAACD,MAAX,CAAkBF,IAA3C,2DAAyB,uBAAwBP,IAAjD,EAAuD,cAAvD,CAAP,CAA8EU,UAA9E;GAFJ;;AAOJ,YAAe;EACXV,IAAI,EAAE,WADK;EAEXK,OAAO,EAAPA;CAFJ;;;;"}