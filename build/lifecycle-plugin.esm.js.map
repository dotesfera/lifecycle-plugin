{"version":3,"file":"lifecycle-plugin.esm.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["import { NodeEditor } from \"rete\";\r\n\r\nexport function getHook<T extends unknown>(editor: NodeEditor, name: undefined | string, method: keyof T) {\r\n    if (!name) return () => null;\r\n    \r\n    const component = editor.getComponent(name);\r\n    \r\n    if (method in component) {\r\n        const c = component as T;\r\n\r\n        return c[method];\r\n    }\r\n\r\n    return () => null;\r\n}","import { NodeEditor } from \"rete\";\r\nimport {\r\n  OnCreated,\r\n  OnDestroyed,\r\n  OnConnect,\r\n  OnConnected,\r\n  OnDisconnect,\r\n  OnDisconnected,\r\n  OnSelected,\r\n} from \"./interfaces\";\r\nimport { getHook } from \"./utils\";\r\n\r\nfunction install(editor: NodeEditor) {\r\n  editor.on(\"nodecreated\", (node) =>\r\n    getHook<OnCreated>(editor, node.name, \"created\")(node)\r\n  );\r\n  editor.on(\"noderemoved\", (node) =>\r\n    getHook<OnDestroyed>(editor, node.name, \"destroyed\")(node)\r\n  );\r\n  editor.on(\"connectioncreate\", ({ input, output }) => {\r\n    if (\r\n      getHook<OnConnect>(editor, input.node?.name, \"onconnect\")(input) ===\r\n        false ||\r\n      getHook<OnConnect>(editor, output.node?.name, \"onconnect\")(output) ===\r\n        false\r\n    )\r\n      return false;\r\n  });\r\n  editor.on(\"connectioncreated\", (connection) => {\r\n    getHook<OnConnected>(\r\n      editor,\r\n      connection.input.node?.name,\r\n      \"connected\"\r\n    )(connection);\r\n    getHook<OnConnected>(\r\n      editor,\r\n      connection.output.node?.name,\r\n      \"connected\"\r\n    )(connection);\r\n  });\r\n  editor.on(\"connectionremove\", (connection) => {\r\n    if (\r\n      getHook<OnDisconnect>(\r\n        editor,\r\n        connection.input.node?.name,\r\n        \"ondisconnect\"\r\n      )(connection) === false ||\r\n      getHook<OnDisconnect>(\r\n        editor,\r\n        connection.output.node?.name,\r\n        \"ondisconnect\"\r\n      )(connection) === false\r\n    )\r\n      return false;\r\n  });\r\n  editor.on(\"connectionremoved\", (connection) => {\r\n    getHook<OnDisconnected>(\r\n      editor,\r\n      connection.input.node?.name,\r\n      \"disconnected\"\r\n    )(connection);\r\n    getHook<OnDisconnected>(\r\n      editor,\r\n      connection.output.node?.name,\r\n      \"disconnected\"\r\n    )(connection);\r\n  });\r\n  // Dotesfera Added\r\n  editor.on(\"nodeselected\", (node) =>\r\n    getHook<OnSelected>(editor, node.name, \"onselected\")(node)\r\n  );\r\n}\r\n\r\nexport * from \"./interfaces\";\r\nexport default {\r\n  name: \"lifecycle\",\r\n  install,\r\n};\r\n"],"names":["getHook","editor","name","method","component","getComponent","c","install","on","node","input","output","connection"],"mappings":";;;;;AAEO,SAASA,OAAT,CAAoCC,MAApC,EAAwDC,IAAxD,EAAkFC,MAAlF,EAAmG;MAClG,CAACD,IAAL,EAAW,OAAO;WAAM,IAAN;GAAP;MAELE,SAAS,GAAGH,MAAM,CAACI,YAAP,CAAoBH,IAApB,CAAlB;;MAEIC,MAAM,IAAIC,SAAd,EAAyB;QACfE,CAAC,GAAGF,SAAV;WAEOE,CAAC,CAACH,MAAD,CAAR;;;SAGG;WAAM,IAAN;GAAP;;;ACDJ,SAASI,OAAT,CAAiBN,MAAjB,EAAqC;EACnCA,MAAM,CAACO,EAAP,CAAU,aAAV,EAAyB,UAACC,IAAD;WACvBT,OAAO,CAAYC,MAAZ,EAAoBQ,IAAI,CAACP,IAAzB,EAA+B,SAA/B,CAAP,CAAiDO,IAAjD,CADuB;GAAzB;EAGAR,MAAM,CAACO,EAAP,CAAU,aAAV,EAAyB,UAACC,IAAD;WACvBT,OAAO,CAAcC,MAAd,EAAsBQ,IAAI,CAACP,IAA3B,EAAiC,WAAjC,CAAP,CAAqDO,IAArD,CADuB;GAAzB;EAGAR,MAAM,CAACO,EAAP,CAAU,kBAAV,EAA8B,gBAAuB;;;QAApBE,KAAoB,QAApBA,KAAoB;QAAbC,MAAa,QAAbA,MAAa;QAEjDX,OAAO,CAAYC,MAAZ,iBAAoBS,KAAK,CAACD,IAA1B,gDAAoB,YAAYP,IAAhC,EAAsC,WAAtC,CAAP,CAA0DQ,KAA1D,MACE,KADF,IAEAV,OAAO,CAAYC,MAAZ,kBAAoBU,MAAM,CAACF,IAA3B,iDAAoB,aAAaP,IAAjC,EAAuC,WAAvC,CAAP,CAA2DS,MAA3D,MACE,KAJJ,EAME,OAAO,KAAP;GAPJ;EASAV,MAAM,CAACO,EAAP,CAAU,mBAAV,EAA+B,UAACI,UAAD,EAAgB;;;IAC7CZ,OAAO,CACLC,MADK,2BAELW,UAAU,CAACF,KAAX,CAAiBD,IAFZ,0DAEL,sBAAuBP,IAFlB,EAGL,WAHK,CAAP,CAIEU,UAJF;IAKAZ,OAAO,CACLC,MADK,2BAELW,UAAU,CAACD,MAAX,CAAkBF,IAFb,0DAEL,sBAAwBP,IAFnB,EAGL,WAHK,CAAP,CAIEU,UAJF;GANF;EAYAX,MAAM,CAACO,EAAP,CAAU,kBAAV,EAA8B,UAACI,UAAD,EAAgB;;;QAE1CZ,OAAO,CACLC,MADK,4BAELW,UAAU,CAACF,KAAX,CAAiBD,IAFZ,2DAEL,uBAAuBP,IAFlB,EAGL,cAHK,CAAP,CAIEU,UAJF,MAIkB,KAJlB,IAKAZ,OAAO,CACLC,MADK,4BAELW,UAAU,CAACD,MAAX,CAAkBF,IAFb,2DAEL,uBAAwBP,IAFnB,EAGL,cAHK,CAAP,CAIEU,UAJF,MAIkB,KAVpB,EAYE,OAAO,KAAP;GAbJ;EAeAX,MAAM,CAACO,EAAP,CAAU,mBAAV,EAA+B,UAACI,UAAD,EAAgB;;;IAC7CZ,OAAO,CACLC,MADK,4BAELW,UAAU,CAACF,KAAX,CAAiBD,IAFZ,2DAEL,uBAAuBP,IAFlB,EAGL,cAHK,CAAP,CAIEU,UAJF;IAKAZ,OAAO,CACLC,MADK,4BAELW,UAAU,CAACD,MAAX,CAAkBF,IAFb,2DAEL,uBAAwBP,IAFnB,EAGL,cAHK,CAAP,CAIEU,UAJF;GANF,EA3CmC;;EAwDnCX,MAAM,CAACO,EAAP,CAAU,cAAV,EAA0B,UAACC,IAAD;WACxBT,OAAO,CAAaC,MAAb,EAAqBQ,IAAI,CAACP,IAA1B,EAAgC,YAAhC,CAAP,CAAqDO,IAArD,CADwB;GAA1B;;AAMF,YAAe;EACbP,IAAI,EAAE,WADO;EAEbK,OAAO,EAAPA;CAFF;;;;"}